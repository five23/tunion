!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=1)}([function(e,t,s){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=function(e,t){var s=e[1]||"",i=e[3];if(!i)return s;if(t&&"function"==typeof btoa){var n=(o=i,a=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),h="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(h," */")),r=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[s].concat(r).concat([n]).join("\n")}var o,a,h;return[s].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,i){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(i)for(var r=0;r<this.length;r++){var o=this[r][0];null!=o&&(n[o]=!0)}for(var a=0;a<e.length;a++){var h=[].concat(e[a]);i&&n[h[0]]||(s&&(h[2]?h[2]="".concat(s," and ").concat(h[2]):h[2]=s),t.push(h))}},t}},function(e,t,s){"use strict";s(2),s(5),s(6),s(7),s(8),s(9);s(10)},function(e,t,s){var i=s(3),n=s(4);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var r={insert:"head",singleton:!1};i(n,r);e.exports=n.locals||{}},function(e,t,s){"use strict";var i,n=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},r=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),o=[];function a(e){for(var t=-1,s=0;s<o.length;s++)if(o[s].identifier===e){t=s;break}return t}function h(e,t){for(var s={},i=[],n=0;n<e.length;n++){var r=e[n],h=t.base?r[0]+t.base:r[0],l=s[h]||0,m="".concat(h," ").concat(l);s[h]=l+1;var c=a(m),u={css:r[1],media:r[2],sourceMap:r[3]};-1!==c?(o[c].references++,o[c].updater(u)):o.push({identifier:m,updater:p(u,t),references:1}),i.push(m)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var n=s.nc;n&&(i.nonce=n)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var o=r(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var m,c=(m=[],function(e,t){return m[e]=t,m.filter(Boolean).join("\n")});function u(e,t,s,i){var n=s?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=c(t,n);else{var r=document.createTextNode(n),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}function f(e,t,s){var i=s.css,n=s.media,r=s.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var d=null,g=0;function p(e,t){var s,i,n;if(t.singleton){var r=g++;s=d||(d=l(t)),i=u.bind(null,s,r,!1),n=u.bind(null,s,r,!0)}else s=l(t),i=f.bind(null,s,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var s=h(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<s.length;i++){var n=a(s[i]);o[n].references--}for(var r=h(e,t),l=0;l<s.length;l++){var m=a(s[l]);0===o[m].references&&(o[m].updater(),o.splice(m,1))}s=r}}}},function(e,t,s){"use strict";s.r(t);var i=s(0),n=s.n(i)()(!1);n.push([e.i,'body{padding:20px;margin:0;background-color:#fef2f4;color:#333}#gui{margin:0;padding:0;width:100%}#editor{font:16px/normal "Monaco","Menlo","Ubuntu Mono","Consolas","source-code-pro",monospace;width:70%;height:100%;right:0;top:0;position:fixed}.editor{visibility:hidden}.editor.visible{visibility:visible}#waveform{padding:0 0 0 0;margin:0 0 2px 2px;border:2px solid #a32da3;opacity:1}#view1{margin:10px 0}.visuals{color:#e6e1dc;font:14px/normal "Monaco","Menlo","Ubuntu Mono","Consolas","source-code-pro",monospace;padding:4px 0 8px}.radioset{font-family:monaco,Consolas,"Lucida Console",monospace;font-size:14px;font-style:normal;font-variant:normal;font-weight:500;line-height:26.4px}h1{font-family:monaco,Consolas,"Lucida Console",monospace;font-size:24px;font-style:normal;font-variant:normal;font-weight:500;line-height:26.4px}h3{font-family:monaco,Consolas,"Lucida Console",monospace;font-size:14px;font-style:normal;font-variant:normal;font-weight:500;line-height:15.4px}p{font-family:monaco,Consolas,"Lucida Console",monospace;font-size:14px;font-style:normal;font-variant:normal;font-weight:400;line-height:20px}blockquote{font-family:monaco,Consolas,"Lucida Console",monospace;font-size:21px;font-style:normal;font-variant:normal;font-weight:400;line-height:30px}pre{font-family:monaco,Consolas,"Lucida Console",monospace;font-size:13px;font-style:normal;font-variant:normal;font-weight:400;line-height:18.5714px}@-webkit-keyframes cd-close-1{0%,50%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(45deg);transform:rotate(45deg)}}@keyframes cd-close-1{0%,50%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(45deg);transform:rotate(45deg)}}@-webkit-keyframes cd-close-2{0%,50%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}}@keyframes cd-close-2{0%,50%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}}.editor__container{right:0;-webkit-transform:translate3d(100%, 0, 0);transform:translate3d(100%, 0, 0)}.visible .editor__container{-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);-webkit-transition-delay:0s;transition-delay:0s}@media only screen and (min-width: 768px){.editor__container{width:70%}}@media only screen and (min-width: 1170px){.editor__container{width:50%}}.editor__content{position:absolute;top:0;left:0;width:100%;height:100%;padding:70px 5%;overflow:auto;-webkit-overflow-scrolling:touch}.editor__content p{font-size:1.4rem;color:#424f5c;line-height:1.4;margin:2em 0}.editor__content p:first-of-type{margin-top:0}@media only screen and (min-width: 768px){.editor__content p{font-size:1.6rem;line-height:1.6}}',""]),t.default=n},function(e,t,s){"use strict"},function(e,t,s){"use strict";function i(){this.elements=Array(16),this.loadIdentity()}i.prototype={scale:function(e,t,s){return this.elements[0]*=e,this.elements[1]*=e,this.elements[2]*=e,this.elements[3]*=e,this.elements[4]*=t,this.elements[5]*=t,this.elements[6]*=t,this.elements[7]*=t,this.elements[8]*=s,this.elements[9]*=s,this.elements[10]*=s,this.elements[11]*=s,this},translate:function(e,t,s){return this.elements[12]+=this.elements[0]*e+this.elements[4]*t+this.elements[8]*s,this.elements[13]+=this.elements[1]*e+this.elements[5]*t+this.elements[9]*s,this.elements[14]+=this.elements[2]*e+this.elements[6]*t+this.elements[10]*s,this.elements[15]+=this.elements[3]*e+this.elements[7]*t+this.elements[11]*s,this},rotate:function(e,t,s,n){var r,o,a,h,l,m,c,u,f,d,g,p=Math.sqrt(t*t+s*s+n*n),y=Math.sin(e*Math.PI/180),v=Math.cos(e*Math.PI/180);p>0&&(r=(t/=p)*t,o=(s/=p)*s,a=(n/=p)*n,h=t*s,l=s*n,m=n*t,c=t*y,u=s*y,f=n*y,d=1-v,(g=new i).elements[0]=d*r+v,g.elements[1]=d*h-f,g.elements[2]=d*m+u,g.elements[3]=0,g.elements[4]=d*h+f,g.elements[5]=d*o+v,g.elements[6]=d*l-c,g.elements[7]=0,g.elements[8]=d*m-u,g.elements[9]=d*l+c,g.elements[10]=d*a+v,g.elements[11]=0,g.elements[12]=0,g.elements[13]=0,g.elements[14]=0,g.elements[15]=1,g=g.multiply(this),this.elements=g.elements);return this},frustum:function(e,t,s,n,r,o){var a,h=t-e,l=n-s,m=o-r;return r<=0||o<=0||h<=0||l<=0||m<=0||((a=new i).elements[0]=2*r/h,a.elements[1]=a.elements[2]=a.elements[3]=0,a.elements[5]=2*r/l,a.elements[4]=a.elements[6]=a.elements[7]=0,a.elements[8]=(t+e)/h,a.elements[9]=(n+s)/l,a.elements[10]=-(r+o)/m,a.elements[11]=-1,a.elements[14]=-2*r*o/m,a.elements[12]=a.elements[13]=a.elements[15]=0,a=a.multiply(this),this.elements=a.elements),this},perspective:function(e,t,s,i){var n=Math.tan(e/360*Math.PI)*s,r=n*t;return this.frustum(-r,r,-n,n,s,i)},ortho:function(e,t,s,n,r,o){var a=t-e,h=n-s,l=o-r,m=new i;return 0==a||0==h||0==l||(m.elements[0]=2/a,m.elements[12]=-(t+e)/a,m.elements[5]=2/h,m.elements[13]=-(n+s)/h,m.elements[10]=-2/l,m.elements[14]=-(r+o)/l,m=m.multiply(this),this.elements=m.elements),this},multiply:function(e){for(var t=new i,s=0;s<4;s++)t.elements[4*s+0]=this.elements[4*s+0]*e.elements[0]+this.elements[4*s+1]*e.elements[4]+this.elements[4*s+2]*e.elements[8]+this.elements[4*s+3]*e.elements[12],t.elements[4*s+1]=this.elements[4*s+0]*e.elements[1]+this.elements[4*s+1]*e.elements[5]+this.elements[4*s+2]*e.elements[9]+this.elements[4*s+3]*e.elements[13],t.elements[4*s+2]=this.elements[4*s+0]*e.elements[2]+this.elements[4*s+1]*e.elements[6]+this.elements[4*s+2]*e.elements[10]+this.elements[4*s+3]*e.elements[14],t.elements[4*s+3]=this.elements[4*s+0]*e.elements[3]+this.elements[4*s+1]*e.elements[7]+this.elements[4*s+2]*e.elements[11]+this.elements[4*s+3]*e.elements[15];return this.elements=t.elements,this},copy:function(){for(var e=new i,t=0;t<16;t++)e.elements[t]=this.elements[t];return e},get:function(e,t){return this.elements[4*e+t]},invert:function(){var e=this.get(2,2)*this.get(3,3),t=this.get(3,2)*this.get(2,3),s=this.get(1,2)*this.get(3,3),i=this.get(3,2)*this.get(1,3),n=this.get(1,2)*this.get(2,3),r=this.get(2,2)*this.get(1,3),o=this.get(0,2)*this.get(3,3),a=this.get(3,2)*this.get(0,3),h=this.get(0,2)*this.get(2,3),l=this.get(2,2)*this.get(0,3),m=this.get(0,2)*this.get(1,3),c=this.get(1,2)*this.get(0,3),u=this.get(2,0)*this.get(3,1),f=this.get(3,0)*this.get(2,1),d=this.get(1,0)*this.get(3,1),g=this.get(3,0)*this.get(1,1),p=this.get(1,0)*this.get(2,1),y=this.get(2,0)*this.get(1,1),v=this.get(0,0)*this.get(3,1),b=this.get(3,0)*this.get(0,1),T=this.get(0,0)*this.get(2,1),w=this.get(2,0)*this.get(0,1),x=this.get(0,0)*this.get(1,1),A=this.get(1,0)*this.get(0,1),E=e*this.get(1,1)+i*this.get(2,1)+n*this.get(3,1)-(t*this.get(1,1)+s*this.get(2,1)+r*this.get(3,1)),R=t*this.get(0,1)+o*this.get(2,1)+l*this.get(3,1)-(e*this.get(0,1)+a*this.get(2,1)+h*this.get(3,1)),C=s*this.get(0,1)+a*this.get(1,1)+m*this.get(3,1)-(i*this.get(0,1)+o*this.get(1,1)+c*this.get(3,1)),S=r*this.get(0,1)+h*this.get(1,1)+c*this.get(2,1)-(n*this.get(0,1)+l*this.get(1,1)+m*this.get(2,1)),_=1/(this.get(0,0)*E+this.get(1,0)*R+this.get(2,0)*C+this.get(3,0)*S),D=_*E,L=_*R,F=_*C,U=_*S,B=_*(t*this.get(1,0)+s*this.get(2,0)+r*this.get(3,0)-(e*this.get(1,0)+i*this.get(2,0)+n*this.get(3,0))),M=_*(e*this.get(0,0)+a*this.get(2,0)+h*this.get(3,0)-(t*this.get(0,0)+o*this.get(2,0)+l*this.get(3,0))),I=_*(i*this.get(0,0)+o*this.get(1,0)+c*this.get(3,0)-(s*this.get(0,0)+a*this.get(1,0)+m*this.get(3,0))),P=_*(n*this.get(0,0)+l*this.get(1,0)+m*this.get(2,0)-(r*this.get(0,0)+h*this.get(1,0)+c*this.get(2,0))),k=_*(u*this.get(1,3)+g*this.get(2,3)+p*this.get(3,3)-(f*this.get(1,3)+d*this.get(2,3)+y*this.get(3,3))),N=_*(f*this.get(0,3)+v*this.get(2,3)+w*this.get(3,3)-(u*this.get(0,3)+b*this.get(2,3)+T*this.get(3,3))),q=_*(d*this.get(0,3)+b*this.get(1,3)+x*this.get(3,3)-(g*this.get(0,3)+v*this.get(1,3)+A*this.get(3,3))),O=_*(y*this.get(0,3)+T*this.get(1,3)+A*this.get(2,3)-(p*this.get(0,3)+w*this.get(1,3)+x*this.get(2,3))),z=_*(d*this.get(2,2)+y*this.get(3,2)+f*this.get(1,2)-(p*this.get(3,2)+u*this.get(1,2)+g*this.get(2,2))),G=_*(T*this.get(3,2)+u*this.get(0,2)+b*this.get(2,2)-(v*this.get(2,2)+w*this.get(3,2)+f*this.get(0,2))),j=_*(v*this.get(1,2)+A*this.get(3,2)+g*this.get(0,2)-(x*this.get(3,2)+d*this.get(0,2)+b*this.get(1,2))),H=_*(x*this.get(2,2)+p*this.get(0,2)+w*this.get(1,2)-(T*this.get(1,2)+A*this.get(2,2)+y*this.get(0,2)));return this.elements[0]=D,this.elements[1]=L,this.elements[2]=F,this.elements[3]=U,this.elements[4]=B,this.elements[5]=M,this.elements[6]=I,this.elements[7]=P,this.elements[8]=k,this.elements[9]=N,this.elements[10]=q,this.elements[11]=O,this.elements[12]=z,this.elements[13]=G,this.elements[14]=j,this.elements[15]=H,this},inverse:function(){return this.copy().invert()},transpose:function(){var e=this.elements[1];return this.elements[1]=this.elements[4],this.elements[4]=e,e=this.elements[2],this.elements[2]=this.elements[8],this.elements[8]=e,e=this.elements[3],this.elements[3]=this.elements[12],this.elements[12]=e,e=this.elements[6],this.elements[6]=this.elements[9],this.elements[9]=e,e=this.elements[7],this.elements[7]=this.elements[13],this.elements[13]=e,e=this.elements[11],this.elements[11]=this.elements[14],this.elements[14]=e,this},loadIdentity:function(){for(var e=0;e<16;e++)this.elements[e]=0;return this.elements[0]=1,this.elements[5]=1,this.elements[10]=1,this.elements[15]=1,this}}},function(e,t,s){"use strict";var i=0,n=0,r=0;var o=function(e){this.canvasElementID=e,this.analysisType=2,this.sonogram3DWidth=256,this.sonogram3DHeight=256,this.sonogram3DGeometrySize=10,this.freqByteData=0,this.texture=0,this.TEXTURE_HEIGHT=256,this.yoffset=0,this.frequencyShader=0,this.waveformShader=0,this.sonogramShader=0,this.sonogram3DShader=0,this.backgroundColor=[191/255,169/255,135/255,1],this.foregroundColor=[63/255,39/255,0,1],this.initGL()};o.prototype.initGL=function(){i=new Matrix4x4,n=new Matrix4x4,r=new Matrix4x4;var e=this.sonogram3DWidth,t=this.sonogram3DHeight,s=this.sonogram3DGeometrySize,o=this.backgroundColor,a=document.getElementById(this.canvasElementID);this.canvas=a;var h=a.getContext("experimental-webgl");this.gl=h,this.has3DVisualizer=h.getParameter(h.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0,this.has3DVisualizer||2!=this.analysisType||(this.analysisType=0);var l=new CameraController(a);this.cameraController=l,l.xRot=-45,l.yRot=0,h.clearColor(o[0],o[1],o[2],o[3]),h.enable(h.DEPTH_TEST);var m=new Float32Array([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0]),c=new Float32Array([1,1,0,1,0,0,1,1,0,0,1,0]),u=m.byteLength;this.vboTexCoordOffset=u;var f=h.createBuffer();this.vbo=f,h.bindBuffer(h.ARRAY_BUFFER,f),h.bufferData(h.ARRAY_BUFFER,u+c.byteLength,h.STATIC_DRAW),h.bufferSubData(h.ARRAY_BUFFER,0,m),h.bufferSubData(h.ARRAY_BUFFER,u,c);var d=e*t;if(d>65536)throw"Sonogram 3D resolution is too high: can only handle 65536 vertices max";m=new Float32Array(3*d),c=new Float32Array(2*d);for(var g=0;g<t;g++)for(var p=0;p<e;p++)m[3*(e*g+p)+0]=s*(p-e/2)/e,m[3*(e*g+p)+1]=0,m[3*(e*g+p)+2]=s*(g-t/2)/t,c[2*(e*g+p)+0]=p/(e-1),c[2*(e*g+p)+1]=g/(t-1);var y=m.byteLength;this.vbo3DTexCoordOffset=y;var v=h.createBuffer();this.sonogram3DVBO=v,h.bindBuffer(h.ARRAY_BUFFER,v),h.bufferData(h.ARRAY_BUFFER,y+c.byteLength,h.STATIC_DRAW),h.bufferSubData(h.ARRAY_BUFFER,0,m),h.bufferSubData(h.ARRAY_BUFFER,y,c);var b=(e-1)*(t-1)*6;this.sonogram3DNumIndices=b;var T=new Uint16Array(b),w=0;for(g=0;g<t-1;g++)for(p=0;p<e-1;p++)T[w++]=g*e+p,T[w++]=g*e+p+1,T[w++]=(g+1)*e+p+1,T[w++]=g*e+p,T[w++]=(g+1)*e+p+1,T[w++]=(g+1)*e+p;var x=h.createBuffer();this.sonogram3DIBO=x,h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,x),h.bufferData(h.ELEMENT_ARRAY_BUFFER,T,h.STATIC_DRAW),shader=shader||{},shader.loadFromScriptNodes=function(e,t,s){var i=document.getElementById(t),n=document.getElementById(s);return i&&n?new shader.Shader(e,i.text,n.text):null},shader.loadTextFileSynchronous=function(e){var t,s='loadTextFileSynchronous failed to load url "'+e+'"';if((t=new XMLHttpRequest).overrideMimeType&&t.overrideMimeType("text/plain"),t.open("GET",e,!1),t.send(null),4!=t.readyState)throw s;return t.responseText},shader.loadFromURL=function(e,t,s){var i=shader.loadTextFileSynchronous(t),n=shader.loadTextFileSynchronous(s);return i&&n?new shader.Shader(e,i,n):null},shader.glslNameToJs_=function(e){return e.replace(/_(.)/g,(function(e,t){return t.toUpperCase()}))},shader.Shader=function(e,t,s){this.program=e.createProgram(),this.gl=e;var i=this.loadShader(this.gl.VERTEX_SHADER,t);if(null!=i){this.gl.attachShader(this.program,i),this.gl.deleteShader(i);var n=this.loadShader(this.gl.FRAGMENT_SHADER,s);if(null!=n){if(this.gl.attachShader(this.program,n),this.gl.deleteShader(n),this.gl.linkProgram(this.program),this.gl.useProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)){var r=this.gl.getProgramInfoLog(this.program);return output("Error linking program:\n"+r),this.gl.deleteProgram(this.program),void(this.program=null)}for(var o=/(uniform|attribute)\s+\S+\s+(\S+)\s*;/g,a=null;null!=(a=o.exec(t+"\n"+s));){var h=a[2],l=shader.glslNameToJs_(h);"uniform"==a[1]?this[l+"Loc"]=this.getUniform(h):"attribute"==a[1]&&(this[l+"Loc"]=this.getAttribute(h))}}}},shader.Shader.prototype.bind=function(){this.gl.useProgram(this.program)},shader.Shader.prototype.loadShader=function(e,t){var s=this.gl.createShader(e);if(null==s)return null;if(this.gl.shaderSource(s,t),this.gl.compileShader(s),!this.gl.getShaderParameter(s,this.gl.COMPILE_STATUS)){var i=this.gl.getShaderInfoLog(s);return output("Error compiling shader:\n"+i),this.gl.deleteShader(s),null}return s},shader.Shader.prototype.getAttribute=function(e){return this.gl.getAttribLocation(this.program,e)},shader.Shader.prototype.getUniform=function(e){return this.gl.getUniformLocation(this.program,e)},this.frequencyShader=shader.loadFromURL(h,"shaders/common-vertex.shader","shaders/frequency-fragment.shader"),this.waveformShader=shader.loadFromURL(h,"shaders/common-vertex.shader","shaders/waveform-fragment.shader"),this.sonogramShader=shader.loadFromURL(h,"shaders/common-vertex.shader","shaders/sonogram-fragment.shader"),this.has3DVisualizer&&(this.sonogram3DShader=shader.loadFromURL(h,"shaders/sonogram-vertex.shader","shaders/sonogram-fragment.shader"))},o.prototype.initByteBuffer=function(){var e=this.gl,t=this.TEXTURE_HEIGHT;if(!this.freqByteData||this.freqByteData.length!=analyser.frequencyBinCount){freqByteData=new Uint8Array(analyser.frequencyBinCount),this.freqByteData=freqByteData,this.texture&&(e.deleteTexture(this.texture),this.texture=null);var s=e.createTexture();this.texture=s,e.bindTexture(e.TEXTURE_2D,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR);var i=new Uint8Array(freqByteData.length*t);e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,freqByteData.length,t,0,e.ALPHA,e.UNSIGNED_BYTE,i)}},o.prototype.setAnalysisType=function(e){(this.has3DVisualizer||2!=e)&&(this.analysisType=e)},o.prototype.analysisType=function(){return this.analysisType},o.prototype.doFrequencyAnalysis=function(e){var t=this.freqByteData;switch(this.analysisType){case 0:analyser.smoothingTimeConstant=.75,analyser.getByteFrequencyData(t);break;case 1:case 2:analyser.smoothingTimeConstant=.1,analyser.getByteFrequencyData(t);break;case 3:analyser.smoothingTimeConstant=.1,analyser.getByteTimeDomainData(t)}this.drawGL()},o.prototype.drawGL=function(){var e=this.canvas,t=this.gl,s=this.vbo,o=this.vboTexCoordOffset,a=this.sonogram3DVBO,h=this.vbo3DTexCoordOffset,l=this.sonogram3DGeometrySize,m=this.sonogram3DNumIndices,c=(this.sonogram3DWidth,this.sonogram3DHeight),u=this.freqByteData,f=this.texture,d=this.TEXTURE_HEIGHT,g=this.frequencyShader,p=this.waveformShader,y=this.sonogramShader,v=this.sonogram3DShader;t.bindTexture(t.TEXTURE_2D,f),t.pixelStorei(t.UNPACK_ALIGNMENT,1),1!=this.analysisType&&2!=this.analysisType&&(this.yoffset=0),t.texSubImage2D(t.TEXTURE_2D,0,0,this.yoffset,u.length,1,t.ALPHA,t.UNSIGNED_BYTE,u),1!=this.analysisType&&2!=this.analysisType||(this.yoffset=(this.yoffset+1)%d);var b,T,w,x,A,E,R,C=this.yoffset;switch(this.analysisType){case 0:case 3:t.bindBuffer(t.ARRAY_BUFFER,s),(R=0==this.analysisType?g:p).bind(),b=R.gPositionLoc,T=R.gTexCoord0Loc,w=R.frequencyDataLoc,x=R.foregroundColorLoc,A=R.backgroundColorLoc,t.uniform1f(R.yoffsetLoc,.5/(d-1)),E=o;break;case 1:t.bindBuffer(t.ARRAY_BUFFER,s),y.bind(),b=y.gPositionLoc,T=y.gTexCoord0Loc,w=y.frequencyDataLoc,x=y.foregroundColorLoc,A=y.backgroundColorLoc,t.uniform1f(y.yoffsetLoc,C/(d-1)),E=o;break;case 2:t.bindBuffer(t.ARRAY_BUFFER,a),v.bind(),b=v.gPositionLoc,T=v.gTexCoord0Loc,w=v.frequencyDataLoc,x=v.foregroundColorLoc,A=v.backgroundColorLoc,t.uniform1i(v.vertexFrequencyDataLoc,0);var S=this.yoffset/(d-1);t.uniform1f(v.yoffsetLoc,S);var _=Math.floor(S*(c-1))/(c-1);t.uniform1f(v.vertexYOffsetLoc,_),t.uniform1f(v.verticalScaleLoc,l/4),r.loadIdentity(),r.perspective(55,e.width/e.height,1,100),n.loadIdentity(),n.translate(0,0,-10),i.loadIdentity(),i.rotate(this.cameraController.xRot,1,0,0),i.rotate(this.cameraController.yRot,0,1,0);var D=new Matrix4x4;D.multiply(i),D.multiply(n),D.multiply(r),t.uniformMatrix4fv(v.worldViewProjectionLoc,t.FALSE,D.elements),E=h}w&&t.uniform1i(w,0),x&&t.uniform4fv(x,this.foregroundColor),A&&t.uniform4fv(A,this.backgroundColor),t.enableVertexAttribArray(b),t.vertexAttribPointer(b,3,t.FLOAT,!1,0,0),t.enableVertexAttribArray(T),t.vertexAttribPointer(T,2,t.FLOAT,t.FALSE,0,E),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),0==this.analysisType||3==this.analysisType||1==this.analysisType?t.drawArrays(t.TRIANGLES,0,6):2==this.analysisType&&t.drawElements(t.TRIANGLES,m,t.UNSIGNED_SHORT,0),t.disableVertexAttribArray(b),t.disableVertexAttribArray(T)}},function(e,t,s){"use strict"},function(e,t,s){"use strict";var i,n=null;function r(){this.apiFunctionNames=["process"],this.isPlaying=!1,this.compiledCode=null,this.lastCodeChangeTime=0,this.lastCompilationTime=0,this.compilationDelay=1e3,this.sampleRate=44100,this.bufferSize=2048,this.t=0}window.hasOwnProperty("AudioContext")&&!window.hasOwnProperty("webkitAudioContext")&&(window.webkitAudioContext=AudioContext),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},window.onload=function(){var e=document.getElementById("editor");Nexus.Add.Toggle("#header-panel").on("change",(function(t){var s,i;e.matches(".visible")?(i="visible",(s=e).classList?s.classList.add(i):s.matches("."+i)||(s.className+=" "+i)):function(e,t){if(e.classList)e.classList.remove(t);else if(!e.matches("."+t)){var s=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(s," ")}}(e,"visible")}));Nexus.Add.RadioButton("#header-panel",{size:[120,25],numberOfButtons:4,active:-1});n=new r,navigator.mediaDevices?(console.log("getUserMedia supported."),navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(e){n.start(e)})).catch((function(e){console.log("The following gUM error occured: "+e)}))):console.log("getUserMedia not supported on your browser!")},r.prototype={start:function(e){var t=this;this.audioContext=new AudioContext,this.analyserView=new AnalyserView("view1"),this.editor=ace.edit("editor"),this.editor.setShowPrintMargin(!1),this.editor.getSession().setMode("ace/mode/javascript"),this.editor.on("change",(function(){t.lastCodeChangeTime=Date.now()})),this.compileCode(),this.streamNode=this.audioContext.createMediaStreamSource(e),this.jsProcessor=this.audioContext.createScriptProcessor(this.bufferSize,1,1),this.jsProcessor.onaudioprocess=function(e){t.executeCode(e)},(i=this.audioContext.createAnalyser()).fftSize=2048,i.smoothingTimeConstant=.3,this.jsProcessor.connect(i),i.connect(this.audioContext.destination),i.getByteFrequencyData(new Uint8Array(i.frequencyBinCount)),this.analyser=i,this.analyserView.initByteBuffer(),this.mainLoop()},compileCode:function(){for(var e=this.editor.getValue(),t=[],s=0;s<this.apiFunctionNames.length;++s){var i=this.apiFunctionNames[s];t.push(i+":(typeof "+i+"=='function'?"+i+":null)")}e+="\nreturn {"+t.join(",")+" };",this.lastCompilationTime=Date.now();var n=null;try{n=new Function(e)()}catch(e){return console.log("Compilation failed: "+e.message+"\n"+e.stack),!1}return this.compiledCode=n,!0},executeCode:function(e){null!==e&&(e=this.compiledCode.process(e))},mainLoop:function(){var e=this;requestAnimationFrame((function(){e.mainLoop()})),Date.now()-this.lastCodeChangeTime>this.compilationDelay&&this.lastCodeChangeTime>this.lastCompilationTime?this.compileCode():this.compiledCode.onGui&&this.compiledCode.onGui(),this.analyserView.doFrequencyAnalysis(this.analyser)}}},function(e,t,s){"use strict";function i(e){if(!(this instanceof i))return new i(e);e=e||512,this.buffer=new Float32Array(e),this.size=e,this.counter=0,this._feedback=.5,this._delay=100}s.r(t),
/**
 * @module delay
 * @author stagas
 * @org opendsp
 * @desc delay
 * @see http://www.musicdsp.org/showone.php?id=98
 * @license mit
 */t.default=i,i.prototype.feedback=function(e){return this._feedback=e,this},i.prototype.delay=function(e){return this._delay=e,this},i.prototype.run=function(e){var t=this.counter-this._delay;t<0&&(t=this.size+t);var s=Math.floor(t),i=s-1,n=s+1,r=s+2;i<0&&(i=this.size-1),n>=this.size&&(n=0),r>=this.size&&(r=0);var o=this.buffer[i],a=this.buffer[s],h=this.buffer[n],l=this.buffer[r],m=t-s,c=(((.5*(l-o)+1.5*(a-h))*m+(o-2.5*a+2*h-.5*l))*m+.5*(h-o))*m+a;return this.buffer[this.counter]=e+c*this._feedback,this.counter++,this.counter>=this.size&&(this.counter=0),c}}]);